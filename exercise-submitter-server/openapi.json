{"openapi":"3.0.1","info":{"title":"Sparkyservice API","license":{"name":"Apache 2.0","url":""},"version":"1.0.1-SNAPSHOT"},"servers":[{"url":"http://147.172.178.30:8080/","description":"Generated server url"}],"tags":[{"name":"auth-controller","description":"Controller for realm authentication with JWT"},{"name":"user-controller","description":"Controller for user managment"}],"paths":{"/api/v1/users/{realm}/{username}":{"get":{"tags":["user-controller"],"summary":"Gets a unique user","operationId":"getUser","parameters":[{"name":"realm","in":"path","required":true,"schema":{"type":"string","enum":["LOCAL","LDAP","MEMORY","UNKNOWN"]}},{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"401":{"description":"User is not authenticated ","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"The desired user or realm was not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"403":{"description":"User is not authorized","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"200":{"description":"Return user","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"security":[{"bearer-key":[]}]},"delete":{"tags":["user-controller"],"summary":"Deletes a user","operationId":"deleteUser","parameters":[{"name":"realm","in":"path","required":true,"schema":{"type":"string","enum":["LOCAL","LDAP","MEMORY","UNKNOWN"]}},{"name":"username","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"404":{"description":"The desired user was not found"},"401":{"description":"User is not authenticated "},"403":{"description":"User is not authorized"},"204":{"description":"User deleted"}},"security":[{"bearer-key":[]}]}},"/api/v1/users":{"get":{"tags":["user-controller"],"summary":"Gets all users from all supported realms","operationId":"getAllUsers","responses":{"200":{"description":"default response","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}},"security":[{"bearer-key":[]}]},"put":{"tags":["user-controller"],"summary":"Adds a new local user","operationId":"createLocalUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UsernameDto"}}},"required":true},"responses":{"201":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"security":[{"bearer-key":[]}]},"patch":{"tags":["user-controller"],"summary":"Edits users (in any realm)","description":"Edit and return the new user","operationId":"editUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}},"required":true},"responses":{"403":{"description":"Current user is not authorized to edit this user"},"404":{"description":"The edit target was not found"},"200":{"description":"User edit was successful","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"401":{"description":"Current user is not authenticated"}},"security":[{"bearer-key":[]}]}},"/api/v1/users/{realm}":{"get":{"tags":["user-controller"],"summary":"Gets all users from a single realm","operationId":"getAllUsersFromRealm","parameters":[{"name":"realm","in":"path","required":true,"schema":{"type":"string","enum":["LOCAL","LDAP","MEMORY","UNKNOWN"]}}],"responses":{"200":{"description":"default response","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserDto"}}}}}},"security":[{"bearer-key":[]}]}},"/api/v1/heartbeat":{"get":{"tags":["routing-controller"],"description":"Checks if the and API is reachable under /api/v0","operationId":"isAlive","responses":{"204":{"description":"Status is up - No content to send"}}}},"/{path}":{"get":{"tags":["routing-controller"],"operationId":"route","parameters":[{"name":"path","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"2XX":{"description":"forwarded to the target"},"403":{"description":"User is not authorized to access path"},"401":{"description":"This path is protected. User needs to authenticate "}},"security":[{"bearer-key":[]}]}},"/api/v1/authenticate":{"post":{"tags":["auth-controller"],"summary":"Authentication / Login","description":"Authenticates the user and sets a JWT into the authorization header","operationId":"authenticate","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CredentialsDto"}}},"required":true},"responses":{"200":{"description":"Authentication success","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthenticationInfoDto"}}}},"403":{"description":"Authentication failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDto"}}}}}}},"/api/v1/authenticate/check":{"get":{"tags":["auth-controller"],"description":"Checks the authentication state of the users authorization header and returns all  user informations which belongs to the user","operationId":"checkTokenAuthenticationStatus","responses":{"200":{"description":"Authentication status is good","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthenticationInfoDto"}}}},"403":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDto"}}}},"401":{"description":"Not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorDto"}}}}},"security":[{"bearer-key":[]}]}},"/api/v1/authenticate/verify":{"get":{"tags":["auth-controller"],"description":"Prints the validity status of a given token","operationId":"verifyTokenValidity","parameters":[{"name":"jwtToken","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"default response","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthenticationInfoDto"}}}}},"security":[{"bearer-key":[]}]}}},"components":{"schemas":{"UsernameDto":{"required":["username"],"type":"object","properties":{"username":{"type":"string"}}},"ChangePasswordDto":{"required":["newPassword"],"type":"object","properties":{"oldPassword":{"type":"string"},"newPassword":{"type":"string"}}},"SettingsDto":{"required":["emailReceive","wantsAi"],"type":"object","properties":{"wantsAi":{"type":"boolean"},"emailReceive":{"type":"boolean"},"emailAddress":{"type":"string"},"payload":{"type":"string"}}},"UserDto":{"required":["realm","settings","username"],"type":"object","properties":{"username":{"type":"string"},"fullName":{"type":"string"},"realm":{"type":"string","enum":["LOCAL","LDAP","MEMORY","UNKNOWN"]},"passwordDto":{"$ref":"#/components/schemas/ChangePasswordDto"},"settings":{"$ref":"#/components/schemas/SettingsDto"},"role":{"type":"string","enum":["DEFAULT","ADMIN","SERVICE"]},"expirationDate":{"type":"string","format":"date"}}},"CredentialsDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}},"ErrorDto":{"type":"object","properties":{"timestamp":{"type":"string"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"messge":{"type":"string"},"path":{"type":"string"}}},"AuthenticationInfoDto":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserDto"},"token":{"$ref":"#/components/schemas/TokenDto"}}},"TokenDto":{"type":"object","properties":{"token":{"type":"string"},"expiration":{"type":"string"}}}},"securitySchemes":{"bearer-key":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}